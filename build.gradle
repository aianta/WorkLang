/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

 plugins {
 	id 'java'
 	id 'application'
 	id 'eclipse'
 	id 'com.github.johnrengelman.shadow' version '2.0.2'
 	id "org.xtext.xtend" version "1.0.21"
 	id 'org.xtext.builder' version '1.0.21'
 }
 
 eclipse{
 
    classpath {
        containers 'org.eclipse.pde.core.requiredPlugins'
    }
       
 }
 
  xtext {
 	languages {
 		worklang {
 			setup = 'org.worklang.WorkStandaloneSetup'
 			generator.outlet.producesJava = true
 		}
 	}
 }
 
 apply plugin: 'eclipse'
 apply plugin: 'org.xtext.xtend'
 apply plugin: 'org.xtext.builder'
 
 dependencies {
 	xtextLanguages 'org.worklang:org.worklang'
 	compile 'org.eclipse.xtend:org.eclipse.xtend.lib:2.13.0'
 	compile 'io.vertx:vertx-core:3.5.1'
 	compile 'io.vertx:vertx-web:3.5.1'
 }
 
 
 sourceSets {
 	main {
 	
 		java {
 			srcDirs += "src/"
 			srcDirs += "src-gen/"
 			srcDirs += "xtend-gen/"
 		}
 		
 		main.xtendOutputDir = 'xtend-gen'
 	
 		
 	}
 }
 
 repositories {
 	
 	jcenter()
 	maven{
 		url "https://mvnrepository.com/artifact/io.vertx/"
 	}
 }
 
 //WorkLang metadata
 version = '0.0.1'
 sourceCompatibility = '1.8'
 mainClassName = 'org.worklang.generator.Main'
 


 shadowJar {
    classifier = 'fat'
    manifest {
        attributes 'Main-Verticle': 'org.worklang.generator.Main'
    }
    mergeServiceFiles {
        include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
    }
    zip64 true
 }

 task wrapper(type: Wrapper) {
    gradleVersion = '4.0'
 }
 