/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

 plugins {
 	id 'java'
 	id 'application'
 	id 'com.github.johnrengelman.shadow' version '2.0.2'
 	id "org.xtext.xtend" version "1.0.21"
 	//id 'org.xtext.builder' version '1.0.21'
 }
 

 
 

 apply plugin: 'org.xtext.xtend'
// apply plugin: 'org.xtext.builder'
 
 dependencies {

 	compile 'org.eclipse.xtend:org.eclipse.xtend.lib:2.13.0'
 	compile 'io.vertx:vertx-core:3.5.1'
 	compile 'io.vertx:vertx-web:3.5.1'
 	
 	compile group: 'com.google.inject', name: 'guice', version: '4.2.0'
	compile group: 'org.eclipse.emf', name: 'org.eclipse.emf.common', version: '2.12.0'
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.xtext.generator', version: '2.14.0'
	compile group: 'org.eclipse.xtext', name: 'org.eclipse.xtext.util', version: '2.14.0'
 	
 	
 }
 
 project.ext.WorkXtextBin = project.file("../src-gen/org/worklang")
 
 sourceSets {
 	main {
 	
 		java {
 			srcDirs += "src/"
 			srcDirs += "src-gen/"
 			srcDirs += "xtend-gen/"; 
 		}
 	
 		//Include work.xtextbin
 		resources{
 			srcDirs += ["src-gen/"]; exclude "**/*.java"
 		}
 		
 		output.resourcesDir = "build/classes/java/main/"
 		
 		main.xtendOutputDir = 'xtend-gen/'	
 	}
 }
 
 

 
 repositories {
 	
 	jcenter()
 	maven{
 		url "https://mvnrepository.com/artifact/io.vertx/"
 	}
 }
 
 //WorkLang metadata
 version = '0.0.1'

 mainClassName = 'org.worklang.generator.Main'
 


 shadowJar {
    classifier = 'fat'
    manifest {
        attributes 'Main-Verticle': 'org.worklang.generator.Main'
    }
    mergeServiceFiles {
        include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
        
    }
    
    
    zip64 true
 }

 task wrapper(type: Wrapper) {
    gradleVersion = '4.0'
 }
 